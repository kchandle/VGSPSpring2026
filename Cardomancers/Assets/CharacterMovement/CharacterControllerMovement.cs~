using UnityEngine;

[RequireComponent(typeof(CharacterController))]
public class CharacterControllerMovement : MonoBehaviour
{
    public float characterSpeed = 1f; 
    public Vector3 inputDirection; //Vector3 from another script that gives the direction the character will move in 
    [SerializeField] private float gravity = 9.8f; // intensity of gravity
	[SerializeField] private float jumpIntensity = 5f;
	public bool jumping;
    private CharacterController _characterController;

    private void Start()
    {
	  _characterController = GetComponent<CharacterController>();
    }

    private void Update()
    {
	  if(!_characterController.isGrounded)
	  {
			  inputDirection.y -= gravity * Time.deltaTime; //accelerate the player downward when they are not on the ground;
	  }
	  if(_characterController.isGrounded && jumping)
	  {
			  inputDirection.y = Mathf.Sqrt(jumpIntensity * 2f * gravity);
	  }

	  Vector3 finalMovement = (inputDirection * characterSpeed); // combines all factors

	  _characterController.Move(finalMovement * Time.deltaTime); // moves the player

	  jumping = false;
    }
	  
}
